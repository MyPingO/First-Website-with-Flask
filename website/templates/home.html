{% extends "blueprint.html" %}

{%block title%}Home Page{%endblock%}

{%block cssimports%}
<link rel="stylesheet" href="{{ url_for('static', filename='homestyles.css') }}">
{%endblock%}

{%block content%}

<form method="POST">
    <div class="formGroup">
        <label for="ytplaylist">
            <h3>Enter YouTube Playlist/Video Link Here</h3>
        </label>
        <div class="inputs">
            <div class="formInput textInput">
                <input type="text" class="form-control" name="url" style="text-align:center;">
            </div>
            <button class="btn btn-primary searchButton" type="submit">Search</button>
        </div>
    </div>
    <div>
        <div class="rangeSettings" style="padding-top: 20px; padding-right: 20px; text-align: center;">
            <div style="padding-left: 20px;">
                <label for="Ranges" style="text-align: center;">
                    <h4>Specify Range (Inclusive)</h4>
                </label>
            </div>
            <ul class="rangeSettings"
                style="list-style:none; display: flex; flex-wrap: wrap; justify-content: center; padding-right: 20px">
                <li class="rangeListItem" style="min-width: 300px; width: 23vw; max-width: 25vw;">
                    <!--TODO: change mind width according to screensize of mobile device-->
                    <div style="white-space: nowrap; text-align: center;">Start from:</div>
                    <input class="form-control" type="text" name="start_video"
                        placeholder="https://www.youtube.com/watch?v=example123" style="text-align:center;">
                </li>
                <li class="rangeListItem" style="min-width: 300px; width: 23vw; max-width: 25vw;">
                    <div style="white-space: nowrap; text-align: center;">End at:</div>
                    <input class="form-control" type="text" name="end_video"
                        placeholder="https://www.youtube.com/watch?v=example123" style="text-align:center;">
                </li>
            </ul>
        </div>
    </div>
</form>
{% if user.links %}
<div class="previousSearchList" style="padding-left:1vw; padding-top: 20px;">
    <form method="POST">
        <div class="searchListDiv" style="display: flex; justify-content: center;">
            <ul class="list-group searchList" style="max-width: fit-content; padding-right: 1vw;">
                <label for="PreviousDownloads" style="text-align: center;">
                    <h4>Previous Searches</h4>
                </label>
                {% for youtube_link in user.links|reverse %}
                <li class="list-group-item">
                    <div style="text-align: center;">
                        <strong>{{youtube_link.title}}</strong> <br>
                        <a href="{{ youtube_link.link }}" target="_blank">
                            {{ youtube_link.link }}
                        </a>
                        <div style="padding-top: 5px;">
                            Date: {{youtube_link.date_added}}
                            <button type="submit" value="{{youtube_link.link}}" title="{Download Again!}" name="url"
                                id="redownload"
                                style="font-size: 13px; text-align: center; padding: 0px 3px 0px 3px; border-width: 1px;">
                                Download Again!
                            </button>
                            <br>
                        </div>
                        {% if youtube_link.thumbnail_link %}
                        <a href="{{ youtube_link.thumbnail_link }}" target="_blank" title = "Video Thumbnail">
                            <img class="thumbnail" src="{{ youtube_link.thumbnail_link }}" alt="Video Thumbnail"
                                style="width: 100%; height: 75%; margin-top: 10px;">
                        </a>
                        {% endif %}
                    </div>
                </li>
                {% endfor %}
            </ul>
        </div>
    </form>
</div>
{% endif %}


{%endblock%}